(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-726adc74"],{"05df":function(t,e,o){"use strict";o("8e87")},"19ca":function(t,e,o){"use strict";o("31f0")},"1c76":function(t,e,o){},"23bc":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEnSURBVHgB7djbbcMwDAVQuhN0g3qEjuBukFG6QbtB0wk6QrOBs0GQCZgNkg1uKMQfQV4QoxcN8AD3T4AlU4QlEznnnHNKAAbJv2SU/El6mguZ7ALX9pJPmgOZ6Ab3sflqIM4XWYV4bLIa0LNVDTyHzVQDadpXA+kYGavxQvX1Em5WDeTFkndK0KIC53pJ+DD+SF6pBpTDkoGUOlIKT6KyPrquW8cObr2FblE1t8UF9JrBFhew0wy2uIBfzWBLC9jRqYFXVBLKCNfTWX4H6l9Fkc+IFkds5PFNrSAN44njgpUFLFGrUTMvIDTqgqyAzghrfyYiJ273T13E5BmJt6yipm1xj41GfSS83WmLXL71gRpQ38iCqTHDHn+TbCVLOYQdyDnnnKvsCEOlIkjdtMmvAAAAAElFTkSuQmCC"},"31f0":function(t,e,o){},3947:function(t,e,o){"use strict";o("ac1f");e["a"]=function(){var t,e,o;function i(){return/ipad|iphone/i.exec(navigator.userAgent)}function n(e){t=document.createElement("textArea"),t.value=e,document.body.appendChild(t)}function a(){var e,o;i()?(e=document.createRange(),e.selectNodeContents(t),o=window.getSelection(),o.removeAllRanges(),o.addRange(e),t.setSelectionRange(0,999999)):t.select()}function c(e,o){try{document.execCommand("Copy")?e():o()}catch(i){o()}document.body.removeChild(t)}return e=function(t,e,o){n(t),a(),c(e,o)},o=function(t,e,o){try{navigator.clipboard.writeText(t).then((function(){e()})).catch((function(t){o()}))}catch(i){o()}},{copy:e,copyNew:o}}},4264:function(t,e,o){"use strict";o("c8ad")},"46a0":function(t,e,o){},"46c5":function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"nd-download"},[e("vip-dialog",{attrs:{title:t.$t("membership.dialogTitle.heightSpeed"),showVipDialog:t.showDialog,sceneType:t.sceneType},on:{"close-vip-dialog":t.handleVipDialogClose}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.bottomTipShow&&!t.isPremium&&!t.downloadToastRendered,expression:"bottomTipShow && !isPremium && !downloadToastRendered"}],class:["bottom-tip-wrap",{"bottom-tip-wrap-part":!t.isVideoPage}]},[e("div",{staticClass:"bottom-tip-text"},[t._v(" "+t._s(t.$t("main.download.bottomToastTitle"))+" "),e("img",{staticClass:"member-icon",attrs:{src:o("7b99"),alt:""}})]),e("a",{staticClass:"bottom-tip-openBtn",attrs:{title:t.$t("main.download.buyPremium"),href:"javascript:;"},on:{click:t.bottomTipClick}},[e("span",[t._v(t._s(t.$t("main.download.buyPremium")))])]),e("div",{staticClass:"bottom-tip-closeBtn",on:{click:t.closeDownloadTips}})]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.topToastShow,expression:"topToastShow"}],staticClass:"top-toast-wrap",style:t.isTopNoticeShow?{top:"114px"}:{}},[e("div",{staticClass:"toast-icon"}),e("div",{staticClass:"toast-text"},[t._v(" "+t._s(t.$t("main.download.downloadFilePremiumToast"))+" ")])]),t.isShowGuidePcDialog?e("button-dialog",{staticClass:"guide-pc-dialog",attrs:{title:t.$t("share.guidePc.download"),bodyText:"size"===t.type?t.$t("main.download.over100M"):t.$t("main.download.over50"),leftBtnText:t.$t("share.guidePc.continueDownload"),rightBtnText:t.$t("share.guidePc.goToPc")},on:{close:function(e){t.isShowGuidePcDialog=!1},leftBtnClick:t.continueBtnClick,rightBtnClick:t.goToPcBtnClick},scopedSlots:t._u([t.isPremium?null:{key:"bottom",fn:function(){return[e("div",{staticClass:"bottom-box",on:{click:t.toMembership}},[e("div",[t._v(t._s(t.$t("share.guidePc.membershipText")))]),e("div",{staticClass:"buy-button"},[e("span",[t._v(t._s(t.$t("share.guidePc.buy")))]),e("span",{staticClass:"icon icon-arrow-right"})])])]},proxy:!0}],null,!0)}):t._e(),t.isShowDownloadPcDialog?e("button-dialog",{staticClass:"download-pc-dialog",attrs:{title:t.$t("share.guidePc.downloadPcTitle"),bodyText:t.$t("share.guidePc.downloadPcText"),leftBtnText:t.$t("share.guidePc.cancel"),rightBtnText:t.$t("share.guidePc.downloadPc")},on:{close:function(e){t.isShowDownloadPcDialog=!1},leftBtnClick:function(e){t.isShowDownloadPcDialog=!1},rightBtnClick:t.downloadPcBtnClick},scopedSlots:t._u([t.isPremium?null:{key:"bottom",fn:function(){return[e("div",{staticClass:"bottom-box",on:{click:t.toMembership}},[e("div",[t._v(t._s(t.$t("share.guidePc.membershipText")))]),e("div",{staticClass:"buy-button"},[e("span",[t._v(t._s(t.$t("share.guidePc.buy")))]),e("span",{staticClass:"icon icon-arrow-right"})])])]},proxy:!0}],null,!0)}):t._e(),t.isExpVideoDialog?e("video-download-dialog",{staticClass:"guide-pc-dialog-v2",attrs:{title:t.$t("share.guidePc.download"),currentFileMeta:t.currentFileMetas},on:{close:function(e){t.isExpVideoDialog=!1},"pc-download":t.goToPcBtnClick}}):t._e(),t.isExpDirectDialog?e("direct-download-dialog",{staticClass:"guide-pc-dialog-v2",attrs:{title:t.$t("share.guidePc.download")},on:{"pc-download":t.goToPcBtnClick,"direct-download":t.directDownloadFile,close:function(e){t.isExpDirectDialog=!1}}}):t._e(),t.isExpGuidePcDialog?e("guide-pc-dialog",{staticClass:"guide-pc-dialog-v2",attrs:{pkgSettingkey:"fe_web_windows_stream_to_pc_setting",title:t.$t("share.guidePc.download"),bodyText:t.guidePcDialogBodyText,footerText:t.$t("share.guidePc.cantDownload"),pageFrom:t.pageFrom},on:{close:function(e){t.isExpGuidePcDialog=!1},"go-to-pc":function(e){return t.launchPC("terabox://launch-app")}}}):t._e(),t.isShowGuidePcToast?e("message",{attrs:{icon:"loadingToast",text:t.$t("share.guidePc.loadingToast"),autoClose:!1},on:{close:function(e){t.isShowGuidePcToast=!1}}}):t._e()],1)},n=[],a=o("b85c"),c=o("5530"),s=o("c7eb"),l=o("1da1"),r=(o("99af"),o("caad"),o("d81d"),o("b0c0"),o("e9c4"),o("2532"),o("a573"),o("0a4e")),d=(o("14d9"),o("4e82"),o("b64b"),o("d3b7"),o("4d63"),o("c607"),o("ac1f"),o("2c3e"),o("00b4"),o("25f0"),o("5319"),o("0643"),o("4e3e"),o("159b"),o("0eb6"),o("b7ef"),o("8bd4"),o("8b1a")),u=o("afcf"),p=o("e7c1"),h=o.n(p),g=o("fa8e"),w=o("1946"),f=o("6df4"),b=o("2f62"),m=function(t){var e=Object(d["b"])(t[0].path),o=t.length>1?"".concat(e,"….zip"):"".concat(e,".zip");return o},v={data:function(){return{dlinkIns:null,initDom:!1}},computed:Object(c["a"])({},Object(b["c"])(["downloadList","isVisualDownload"])),created:function(){this.dlinkIns=new u["a"](this.ctx,this)},methods:{logForDirectDownload:function(t,e){var o="";o=e?"downloadfile|downloadSize_"+t[0].size+"|downloadFileLength_1|downloadFileCategory_."+t[0].path.split(".")[t[0].path.split(".").length-1]:"downloadfile|downloadFileLength_"+t.length,this.$writeLog("action",o,{page:1,type:o,pf:navigator.platform,fileSize:this.getFileSizeType(t),md5:t[0].md5||"proxypcs"}),/chrome\/(\d+\.\d+)/i.test(navigator.userAgent)&&this.$writeLog("action","chromeStraightforwardDownload")},getFileSizeType:function(t){for(var e=1048576,o=0,i=1===t.length,n=0,a=[],c=0;c<t.length;c++){if(o>300*e)break;o+=t[c].size}return o=Math.ceil(o/e),i?(a=[0,50,100,200,300],a.sort((function(t,e){return o>t&&o<=e?n=t:o>e&&(n=e),n}))):(a=[0,100,300],a.sort((function(t,e){return o>t&&o<=e?n=t:o>e&&(n=e),n}))),n},downloadDlink:function(t){var e=this;this.$writeLog("action","file_down_count",{value:t.length});var o=[],i=[],n=t.length>1?"batch":"dlink";t.forEach((function(t){o.push(t.fs_id),i.push(t.path),1===t.isdir&&(n="batch")}));var a=t[0].fs_id;this.dlinkIns.getDlink({fidlist:o,type:n,pathList:i,primaryid:a}).then((function(o){if(0===o.errno&&(o.dlink||o.list)){var i="",a="",c=0;"batch"===n?(i="".concat(o.dlink,"&zipname=").concat(encodeURIComponent(m(t))),a=m(t),c=-1):(i=o.dlink[0].dlink,a=o.file_info.filename,c=o.file_info.size),"https:"===window.location.protocol&&(i=i.replace(/^http\:/,"https:")),e.isVisualDownload?e.visualDownloadFile(e.formatDownloadURL(i),t,n,a,c):e.downloadFile(i,o.logType)}else e.failMsg(o.show_msg)})).catch((function(t){console.error(t)})),this.logForDirectDownload(t,"batch"===n)},visualDownloadFile:function(t,e,o,i,n){var a=this;return Object(l["a"])(Object(s["a"])().mark((function c(){var l,r,d,u,p,h;return Object(s["a"])().wrap((function(c){while(1)switch(c.prev=c.next){case 0:return c.prev=0,l=t,r=t,c.next=5,w["a"].createTask(l,r,a.$store,{dbName:"fileChunksDB_".concat(a.$store.state.login.uk),storeName:"downloads_".concat(t)},void 0,{fidlist:e.map((function(t){return t.fs_id})),type:o,pathList:e.map((function(t){return t.path})),primaryid:e[0].fs_id},e,i,n);case 5:if(d=c.sent,-1!==d.len){c.next=9;break}return c.next=9,d.fetchFileSize();case 9:d.len>=0?d.downloadChunks():a.$store.commit("UPDATE_DOWNLOAD_TASK",{taskId:t,status:f["g"].ERROR,errorTip:"File size initialization failed"}),c.next=17;break;case 12:c.prev=12,c.t0=c["catch"](0),console.log("Download task error:（visualDownloadFile）",c.t0),c.t0 instanceof DOMException&&"NotFoundError"===c.t0.name&&c.t0.message.includes("object stores was not found")?(p=window.globalVue.$t("main.download.metadataSaveFailed"),h=f["e"].TRANSACTION_ERROR,u=String(p)+"（".concat(String(h),"）")):u=c.t0.message,a.$store.commit("UPDATE_DOWNLOAD_TASK",{taskId:t,status:f["g"].ERROR,errorTip:u});case 17:case"end":return c.stop()}}),c,null,[[0,12]])})))()},warmupHtml:function(){if(!this.initDom){var t=document.createElement("div");t.className="pcs-hide-ele",t.innerHTML='<iframe src="javascript:;" id="pcsdownloadiframe" name="pcsdownloadiframe" style="display:none"></iframe><form target="pcsdownloadiframe" enctype="application/x-www-form-urlencoded" action="'+"https://".concat(Object(g["i"])(),"data.")+g["h"]+'/rest/2.0/pcs/file?method=batchdownload&app_id=250528" method="post" name="pcsdownloadform"><input name="method" value="batchdownload" type="hidden" /><input name="zipcontent" type="hidden" /><input name="zipname" type="hidden" /></form>',document.body.appendChild(t)}this.initDom=!0},downloadFn:function(t,e){var o=this;try{var i=null;this.warmupHtml(),i=document.getElementById("pcsdownloadiframe"),i.onload=i.onreadystatechange=function(t){o.$writeLog("action","file_down_count",{value:e||"webotherdownload"})},i.src=this.formatDownloadURL(t)}catch(n){console.log("download file error",n)}},formatDownloadURL:function(t){return t&&0===t.indexOf("http://")&&"https:"===window.location.protocol&&(t=t.replace("http://",window.location.protocol+"//")),t},downloadFile:function(t,e){var o=this;this.downloadFn(t,e);var i=new RegExp("data.(dubox|terabox|"+g["h"].replace(".com","")+").com");i.test(t)&&h.a.ajax({url:this.formatDownloadURL(t),type:"GET",success:function(){console.log("download file success")},error:function t(e){try{var i=e.status,n=JSON.parse(e.responseText);400===i&&n&&31090===n.error_code&&o.$Message({type:"error",message:o.$t("main.download.over500M")})}catch(t){console.log("error:",t)}}})}}},_=o("79f8"),k=o("9564"),x=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"button-dialog"},[e("du-dialog",{attrs:{dialogClass:t.dialogClass,title:t.title},on:{close:t.close},scopedSlots:t._u([{key:"body",fn:function(){return[t._v(" "+t._s(t.bodyText)+" "),t.$slots.body?t._t("body"):t._e()]},proxy:!0},{key:"footer",fn:function(){return[e("div",{staticClass:"button-box"},[e("du-btn",{staticClass:"left-button",attrs:{text:t.leftBtnText},on:{click:t.leftBtnClick}}),e("du-btn",{staticClass:"right-button",attrs:{text:t.rightBtnText},on:{click:t.rightBtnClick}})],1),t.$slots.bottom?t._t("bottom"):t._e()]},proxy:!0}],null,!0)})],1)},D=[],C=o("d4ec"),A=o("bee2"),O=o("8f33"),T=o("262e"),y=o("ade3"),P=o("9ab4"),j=o("a026"),S=o("1b40"),F=o("3d99"),L=o("f1a1"),B=function(t){function e(){var t;Object(C["a"])(this,e);for(var o=arguments.length,i=new Array(o),n=0;n<o;n++)i[n]=arguments[n];return t=Object(O["a"])(this,e,[].concat(i)),Object(y["a"])(t,"dialogClass",void 0),Object(y["a"])(t,"title",void 0),Object(y["a"])(t,"bodyText",void 0),Object(y["a"])(t,"leftBtnText",void 0),Object(y["a"])(t,"rightBtnText",void 0),Object(y["a"])(t,"btnWidth",""),t}return Object(T["a"])(e,t),Object(A["a"])(e,[{key:"leftBtnClick",value:function(){this.$emit("leftBtnClick")}},{key:"rightBtnClick",value:function(){this.$emit("rightBtnClick")}},{key:"close",value:function(){this.$emit("close")}}])}(j["default"]);Object(P["c"])([Object(S["d"])({default:"button-dialog"})],B.prototype,"dialogClass",void 0),Object(P["c"])([Object(S["d"])(String)],B.prototype,"title",void 0),Object(P["c"])([Object(S["d"])(String)],B.prototype,"bodyText",void 0),Object(P["c"])([Object(S["d"])(String)],B.prototype,"leftBtnText",void 0),Object(P["c"])([Object(S["d"])(String)],B.prototype,"rightBtnText",void 0),B=Object(P["c"])([Object(S["a"])({components:{"du-dialog":F["a"],"du-btn":L["a"]}})],B);var E=B,$=E,z=(o("05df"),o("2877")),I=Object(z["a"])($,x,D,!1,null,null,null),U=I.exports,N=o("7564"),G=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"guide-pc-dialog"},[e("c-dialog",{attrs:{title:t.title},on:{close:t.close},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"body"},[e("div",{staticClass:"body-text"},[t._v(" "+t._s(t.bodyText)+" ")]),e("div",{staticClass:"download-pc-btn",on:{click:t.downloadPcBtnClick}},[t._v(" "+t._s(t.$t("share.guidePc.downloadPc"))+" ")]),e("div",{staticClass:"launch-pc-text"},[e("span",[t._v(t._s(t.$t("share.guidePc.havePc")))]),e("span",{staticClass:"launch-pc-btn",on:{click:t.goToPcBtnClick}},[t._v(t._s(t.$t("share.guidePc.launchPcBtn")))])])]),e("div",{staticClass:"footer"},[e("div",{staticClass:"footer-text"},[e("span",[t._v(t._s(t.footerText))]),e("span",{staticClass:"report-btn",on:{click:t.report}},[t._v(t._s(t.$t("share.guidePc.reportBtn")))])])])]},proxy:!0}])})],1)},R=[],V=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"common-dialog"},[e("div",{staticClass:"modal-mask"}),e("div",{staticClass:"modal-wrap"},[e("div",{staticClass:"header"},[e("span",[t._v(t._s(t.title))]),e("div",{staticClass:"modal-close-icon",on:{click:t.close}},[e("img",{attrs:{src:o("aa7e"),alt:"close",title:"modal-close-icon"}})])]),e("div",{staticClass:"content"},[t._t("content")],2)])])},M=[],Q=function(t){function e(){var t;Object(C["a"])(this,e);for(var o=arguments.length,i=new Array(o),n=0;n<o;n++)i[n]=arguments[n];return t=Object(O["a"])(this,e,[].concat(i)),Object(y["a"])(t,"title",void 0),t}return Object(T["a"])(e,t),Object(A["a"])(e,[{key:"close",value:function(){this.$emit("close")}}])}(j["default"]);Object(P["c"])([Object(S["d"])(String)],Q.prototype,"title",void 0),Q=Object(P["c"])([S["a"]],Q);var J=Q,Y=J,K=(o("bc6b"),Object(z["a"])(Y,V,M,!1,null,null,null)),q=K.exports,H=o("3947"),W=o("b7a8");function X(){window.open(window.globalVue.$t("seo.pcDownload"))}function Z(){return tt.apply(this,arguments)}function tt(){return tt=Object(l["a"])(Object(s["a"])().mark((function t(){var e,o,i,n=arguments;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=n.length>0&&void 0!==n[0]?n[0]:"",!Object(f["I"])()){t.next=8;break}if(Object(f["E"])()){t.next=5;break}return window.open("https://data.".concat(g["h"],"/issue/terabox/PCTeraBox/TeraBox_1.6.2.1.exe")),t.abrupt("return");case 5:Object(W["a"])(e).then((function(t){t?window.open(t):X()})).catch((function(t){console.log("get pkg error",t),X()})),t.next=27;break;case 8:if(!Object(f["F"])()){t.next=26;break}return t.prev=9,t.next=12,Object(N["a"])(["fe_mac_download_setting"]);case 12:if(o=t.sent,!(o&&o.length&&o[0].cfg_list[0].url)){t.next=18;break}if(i=o[0].cfg_list[0].url,!i){t.next=18;break}return window.open(i),t.abrupt("return",!1);case 18:X(),t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](9),X();case 24:t.next=27;break;case 26:X();case 27:case"end":return t.stop()}}),t,null,[[9,21]])}))),tt.apply(this,arguments)}var et=function(t){function e(){var t;Object(C["a"])(this,e);for(var o=arguments.length,i=new Array(o),n=0;n<o;n++)i[n]=arguments[n];return t=Object(O["a"])(this,e,[].concat(i)),Object(y["a"])(t,"title",void 0),Object(y["a"])(t,"bodyText",void 0),Object(y["a"])(t,"footerText",void 0),Object(y["a"])(t,"pageFrom",void 0),Object(y["a"])(t,"pkgSettingkey",void 0),t}return Object(T["a"])(e,t),Object(A["a"])(e,[{key:"mounted",value:function(){this.$writeLog("show","web_".concat(this.pageFrom,"_page_guide_pc_dialog_show"))}},{key:"close",value:function(){this.$emit("close")}},{key:"report",value:function(){window.open("/help-center?from=guide_pc_dialog")}},{key:"goToPcBtnClick",value:function(){this.$writeLog("action","web_".concat(this.pageFrom,"_page_go_to_pc_btn_click")),this.$emit("go-to-pc")}},{key:"downloadPcBtnClick",value:function(){this.$writeLog("action","web_".concat(this.pageFrom,"_page_download_pc_btn_click"));var t=this.pageFrom.includes("share");if(t){var e=this.$route.query.surl;Object(H["a"])().copy("https://".concat(g["h"],"/s/1").concat(e),(function(){}),(function(){console.log("clipboard error")}))}Z(this.pkgSettingkey)}}])}(j["default"]);Object(P["c"])([Object(S["d"])({type:String,default:""})],et.prototype,"title",void 0),Object(P["c"])([Object(S["d"])({type:String,default:""})],et.prototype,"bodyText",void 0),Object(P["c"])([Object(S["d"])({type:String,default:""})],et.prototype,"footerText",void 0),Object(P["c"])([Object(S["d"])({type:String,default:""})],et.prototype,"pageFrom",void 0),Object(P["c"])([Object(S["d"])({type:String,default:""})],et.prototype,"pkgSettingkey",void 0),et=Object(P["c"])([Object(S["a"])({components:{"c-dialog":q}})],et);var ot=et,it=ot,nt=(o("c8b2"),Object(z["a"])(it,G,R,!1,null,null,null)),at=nt.exports,ct=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"direct-dl-dialog"},[e("c-dialog",{attrs:{title:t.$t("share.guidePc.download")},on:{close:t.close},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"body"},[e("div",{staticClass:"recommend-pc"},[t._v(" "+t._s(t.$t("main.directDownloadDialog.recommendPcDownload"))+" ")]),e("div",{staticClass:"download-pc-btn",on:{click:t.pcDownload}},[t._v(" "+t._s(t.$t("main.directDownloadDialog.pcbtnDownload"))+" ")]),e("div",{staticClass:"body-text",on:{click:t.directDownload}},[t._v(" "+t._s(t.$t("main.directDownloadDialog.normalBtnDownload"))+" ")])]),e("div",{staticClass:"footer"},[e("div",{staticClass:"footer-text"},[e("span",[t._v(" "+t._s(t.$t("main.directDownloadDialog.downloadPcTip"))+" ")]),e("span",{staticClass:"report-btn",on:{click:t.handleClickDownPC}},[t._v(" "+t._s(t.$t("main.directDownloadDialog.clkDownload"))+" ")])])])]},proxy:!0}])})],1)},st=[],lt=function(t){function e(){return Object(C["a"])(this,e),Object(O["a"])(this,e,arguments)}return Object(T["a"])(e,t),Object(A["a"])(e,[{key:"mounted",value:function(){this.$writeLog("show","main_direct_dowload_dialog_show")}},{key:"close",value:function(){this.$emit("close")}},{key:"pcDownload",value:function(){this.$writeLog("action","main_dd_go_pc_download_clk"),this.$emit("pc-download")}},{key:"directDownload",value:function(){this.$writeLog("action","main_dd_direct_download_clk"),this.$emit("direct-download")}},{key:"handleClickDownPC",value:function(){this.$writeLog("action","main_dd_download_pc_clk"),this.$emit("close"),Z("fe_web_windows_stream_to_pc_setting")}}])}(j["default"]);lt=Object(P["c"])([Object(S["a"])({components:{"c-dialog":q}})],lt);var rt=lt,dt=rt,ut=(o("ac76"),Object(z["a"])(dt,ct,st,!1,null,"b362c1c6",null)),pt=ut.exports,ht=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"video-dl-dialog"},[e("c-dialog",{attrs:{title:t.$t("share.guidePc.download")},on:{close:t.close},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"body"},[e("div",{staticClass:"video-large-text"},[t._v(" "+t._s(t.$t("main.videoDownloadDialog.videoDialogTitle"))+" ")]),e("div",{staticClass:"video-info"},[e("div",{staticClass:"video-info-left-container",on:{click:t.goVideoPlayPage}},[e("img",{staticClass:"video-img",attrs:{src:t.currentFileMeta[0].thumbnail}}),e("img",{staticClass:"video-play",attrs:{src:o("23bc")}})]),e("div",{staticClass:"video-info-right-container"},[e("div",{staticClass:"video-name"},[t._v(t._s(t.currentFileMeta[0].formatName)+" ")]),e("div",{staticClass:"video-size"},[t._v(" "+t._s(t.$t("main.videoDownloadDialog.videoSize"))+t._s(t.currentFileMeta[0].formatSize)+" ")])])]),e("div",{staticClass:"download-pc-btn",on:{click:t.pcDownload}},[t._v(" "+t._s(t.$t("main.directDownloadDialog.pcbtnDownload"))+" ")])]),e("div",{staticClass:"footer"},[e("div",{staticClass:"footer-text"},[e("span",[t._v(" "+t._s(t.$t("main.directDownloadDialog.downloadPcTip"))+" ")]),e("span",{staticClass:"report-btn",on:{click:t.handleClickDownPC}},[t._v(" "+t._s(t.$t("main.directDownloadDialog.clkDownload"))+" ")])])])]},proxy:!0}])})],1)},gt=[],wt=function(t){function e(){var t;Object(C["a"])(this,e);for(var o=arguments.length,i=new Array(o),n=0;n<o;n++)i[n]=arguments[n];return t=Object(O["a"])(this,e,[].concat(i)),Object(y["a"])(t,"currentFileMeta",void 0),t}return Object(T["a"])(e,t),Object(A["a"])(e,[{key:"mounted",value:function(){this.$writeLog("show","main_large_video_dialog_show")}},{key:"close",value:function(){this.$emit("close")}},{key:"pcDownload",value:function(){this.$writeLog("action","main_vd_go_pc_download_clk"),this.$emit("pc-download")}},{key:"handleClickDownPC",value:function(){this.$writeLog("action","main_vd_download_pc_clk"),this.$emit("close"),Z("fe_web_windows_stream_to_pc_setting")}},{key:"goVideoPlayPage",value:function(){this.$writeLog("action","main_vd_video_online_play_clk");var t="".concat(g["j"],"/play/video?path=").concat(encodeURIComponent(this.currentFileMeta[0].path),"&t=-1");window.open(t)}}])}(j["default"]);Object(P["c"])([Object(S["d"])({default:function(){return[]},required:!1})],wt.prototype,"currentFileMeta",void 0),wt=Object(P["c"])([Object(S["a"])({components:{"c-dialog":q}})],wt);var ft,bt=wt,mt=bt,vt=(o("bad7"),Object(z["a"])(mt,ht,gt,!1,null,"0b8e251b",null)),_t=vt.exports,kt=o("9e28"),xt=o("1095"),Dt=o("df47"),Ct=o("cc0b"),At=o("35d0"),Ot=o("4583"),Tt=(o("cca6"),o("e6cf"),function(t){var e={maxQueryTime:3,queryInterval:2e3},o=Object.assign({},e,t),i=o.maxQueryTime,n=o.queryInterval,a=o.taskQuery,c=o.processRes,s=0,l=function(){return new Promise((function(t){var e=function(){t({status:"fail"})};s>=i?e():(s++,a().then((function(o){switch("function"===typeof c&&(o=c(o)||o),o.status){case"pending":setTimeout((function(){t(l())}),n);break;case"success":t(o);break;default:e()}})).catch((function(){e()})))}))};return l});(function(t){t[t["SUCCESS"]=1]="SUCCESS",t[t["FAIL"]=2]="FAIL"})(ft||(ft={}));var yt=function(t){return Object(At["b"])("/api/invoker/send",{browserid:Object(f["u"])("browserid"),bdstoken:Object(Ot["a"])()},t)},Pt=function(t){var e=Tt({taskQuery:function(){return Object(At["a"])("/api/invoker/check",{seq:t,browserid:Object(f["u"])("browserid")})},processRes:function(t){return t.status===ft.SUCCESS?t.status="success":t.status="pending",t}});return e().then((function(t){return"success"===t.status}))},jt=104857600,St=50,Ft={name:"download-plugin",mixins:[r["a"],k["a"],v,_["a"]],components:{"button-dialog":U,GuidePcDialog:at,DirectDownloadDialog:pt,VideoDownloadDialog:_t,Message:kt["a"],vipDialog:Ct["a"]},data:function(){return{installedTipFrom:"",canShowFail:!0,topToastShow:!1,bottomTipShow:!1,isShowGuidePcDialog:!1,isShowDownloadPcDialog:!1,isShowGuidePcToast:!1,type:"",downLoadToPCExpInfo:[100,1e3,100],isDownloadToPcExp:!1,isExpGuidePcDialog:!1,isExpDirectDialog:!1,isExpVideoDialog:!1,guidePcDialogBodyText:this.$t("main.directDownloadDialog.downloadToPcText"),pageFrom:"",isVideoPage:!1,showDialog:!1,sceneType:Dt["b"].HIGH_SPEED_DOWNLOAD}},created:function(){var t=this;return Object(l["a"])(Object(s["a"])().mark((function e(){var o;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.isVideoPage=t.$route.path.includes("/play/video"),o=sessionStorage.getItem("bottomTipShow"),o&&(t.bottomTipShow=!0,setTimeout((function(){t.bottomTipShow=!1,sessionStorage.removeItem("bottomTipShow")}),12e5));case 3:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;return Object(l["a"])(Object(s["a"])().mark((function e(){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.trialDownloadTestKey!==f["l"].OLD){e.next=7;break}return e.next=3,t.getDownLoadToPCInfo();case 3:console.log("downLoadToPCExpInfo",t.downLoadToPCExpInfo),t.isDownloadToPcExp?t.expDownload():t.download(),e.next=8;break;case 7:t.trialDownloadTestKey!==f["l"].INIT&&t.visualDownload();case 8:case"end":return e.stop()}}),e)})))()},computed:Object(c["a"])(Object(c["a"])({},Object(b["c"])(["trialDownloadTestKey","downloadToastRendered"])),{},{fileTitle:function(){var t=this.currentFileMetas;if(!t.length)return"";var e=t[0],o=t.length>1?"".concat($t("main.share.andSoOn"),"（").concat(t.length,"）").concat($t("main.upload.dirs")):"";return{fileName:e.server_filename,suffix:o}},isPremium:function(){return this.$store.state.login.isPremium},curCountry:function(){return this.$store.state.login.userInfo.cur_country.name},uk:function(){return this.$store.state.login.uk},isTopNoticeShow:function(){return this.$store.state.operate.hasWebTopNotice&&this.$store.state.operate.showWebTopNotice}}),watch:{},methods:{checkIsNewExp:function(t){return this.uk%100<t},checkCountry:function(t,e){return!(null!==t&&void 0!==t&&t.length&&!t.includes(e))},getDownLoadToPCInfo:function(){var t=this;return Object(l["a"])(Object(s["a"])().mark((function e(){var o,i,n,c,l,r,d;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,o=["web_download_to_pc_exp_flow_new","web_download_to_pc"],e.next=4,Object(N["a"])(o);case 4:if(i=e.sent,i&&2===i.length){e.next=7;break}return e.abrupt("return",!1);case 7:if(n=i[0].cfg_list[0].experiment_flow,t.isDownloadToPcExp=t.checkIsNewExp(n),t.isDownloadToPcExp){e.next=11;break}return e.abrupt("return",!1);case 11:c=i[1].cfg_list,l=Object(a["a"])(c),e.prev=13,l.s();case 15:if((r=l.n()).done){e.next=22;break}if(d=r.value,!t.checkCountry(d.nation_name,t.curCountry)||null===d||void 0===d||!d.web_download_to_pc_exp_value){e.next=20;break}return t.downLoadToPCExpInfo=null===d||void 0===d?void 0:d.web_download_to_pc_exp_value,e.abrupt("break",22);case 20:e.next=15;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e["catch"](13),l.e(e.t0);case 27:return e.prev=27,l.f(),e.finish(27);case 30:e.next=35;break;case 32:e.prev=32,e.t1=e["catch"](0),console.log(e.t1);case 35:case"end":return e.stop()}}),e,null,[[0,32],[13,24,27,30]])})))()},closeStreamPcDialog:function(){this.isExpDirectDialog=!1,this.isExpVideoDialog=!1,this.isDownloadToPcExp?this.isExpGuidePcDialog=!1:this.showGuideDialog=!1},bottomTip:function(){var t=this;Object(xt["a"])("main_download"),this.isPremium?(this.topToastShow=!0,this.$writeLog("action","download_files_premium_toast"),setTimeout((function(){t.topToastShow=!1}),5e3)):(this.bottomTipShow=!0,sessionStorage.setItem("bottomTipShow","true"),this.$writeLog("action","download_files_nopremium_modal"),setTimeout((function(){t.bottomTipShow=!1,sessionStorage.removeItem("bottomTipShow")}),12e5))},expDownload:function(){var t=this.currentFileMetas;if(!t.length)return console.error("[Plugin][download] The files must have one file !");if(!Object(f["G"])())return this.directDownloadFile(),!1;if(this.bottomTip(),1===t.length&&1===t[0].category&&t[0].size>1024*this.downLoadToPCExpInfo[0]*1024)t[0].play_forbid||this.isVideoPage?(this.guidePcDialogBodyText=this.$t("main.guidePcDialog.fileSizeLimit"),this.pageFrom="file_size",this.goToPcBtnClick()):this.isExpVideoDialog=!0;else{for(var e=0,o=0;o<t.length;o++){var i=t[o].size;if(e+=i,e>1024*this.downLoadToPCExpInfo[1]*1024)return this.guidePcDialogBodyText=this.$t("main.guidePcDialog.fileSizeLimit"),this.pageFrom="file_size",void this.goToPcBtnClick()}if(t.length>this.downLoadToPCExpInfo[2])return this.guidePcDialogBodyText=this.$t("main.guidePcDialog.fileNumLimit"),this.pageFrom="file_num",void this.goToPcBtnClick();t.length>1&&t.length<=this.downLoadToPCExpInfo[2]?this.isExpDirectDialog=!0:this.directDownloadFile()}},download:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.currentFileMetas;if(!e.length)return console.error("[Plugin][download] The files must have one file !");if(this.bottomTip(),Object(f["G"])()&&!t){for(var o=!1,i=0;i<e.length;i++){var n=e[i];if(n.size>jt){o=!0;break}}if(o)return this.type="size",this.isShowGuidePcDialog=!0,void this.$writeLog("show","web_guide_pc_download_dialog_100m_show");if(e.length>St)return this.type="num",this.isShowGuidePcDialog=!0,void this.$writeLog("show","web_guide_pc_download_dialog_100m_show")}Object(f["I"])()?this.$writeLog("action","download_platform_windows"):this.$writeLog("action","download_platform_mac"),this.downloadDlink(e)},visualDownload:function(){var t=this.currentFileMetas;return t.length?t.length>St?(this.guidePcDialogBodyText=this.$t("main.guidePcDialog.fileNumLimit"),this.pageFrom="file_num",this.isExpGuidePcDialog=!0,void this.goToPcBtnClick()):(this.bottomTip(),void this.downloadDlink(t)):console.error("[Plugin][download] The files must have one file !")},directDownloadFile:function(){this.closeStreamPcDialog();var t=this.currentFileMetas;this.downloadDlink(t)},callAudio:function(){this.__callPlugin("audio-plugin@com.terabox.pan")},handleFailRetry:function(){this.canShowFail=!1},continueBtnClick:function(){this.isShowGuidePcDialog=!1,"size"===this.type?this.$writeLog("action","web_guide_pc_download_dialog_100m_continue_btn_click"):this.$writeLog("action","web_guide_pc_download_dialog_50_continue_btn_click"),this.download(!0)},launchPC:function(t,e){var o=this;return Object(l["a"])(Object(s["a"])().mark((function i(){var n;return Object(s["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(o.closeStreamPcDialog(),window.location.href=t,o.isShowGuidePcToast=!0,n=!1,!o.isDownloadToPcExp){i.next=17;break}if(!e){i.next=11;break}return i.next=8,Pt(e);case 8:n=i.sent,i.next=13;break;case 11:return i.next=13,Object(f["O"])(5e3);case 13:!n&&(o.isExpGuidePcDialog=!0),o.isShowGuidePcToast=!1,i.next=27;break;case 17:if(!e){i.next=23;break}return i.next=20,Pt(e);case 20:n=i.sent,i.next=25;break;case 23:return i.next=25,Object(f["O"])(5e3);case 25:!n&&(o.isShowDownloadPcDialog=!0),o.isShowGuidePcToast=!1;case 27:case"end":return i.stop()}}),i)})))()},goToPcBtnClick:function(){var t=this;this.closeStreamPcDialog(),"size"===this.type?this.$writeLog("action","web_guide_pc_download_dialog_100m_go_to_pc_btn_click"):this.$writeLog("action","web_guide_pc_download_dialog_50_go_to_pc_btn_click");var e=Object(f["u"])("browserid"),o=this.currentFileMetas.map((function(t){return{isdir:t.isdir,path:t.path,md5:t.md5,size:t.size}})),i={task_info:JSON.stringify({download_self_items:o})};yt(i).then((function(o){if(o&&0===o.errno){var i="terabox://transfer/?browserid=".concat(e,"&seq=").concat(o.seq);t.launchPC(i,o.seq)}else t.launchPC("terabox://launch-app")})).catch((function(e){t.launchPC("terabox://launch-app")}))},downloadPcBtnClick:function(){this.$writeLog("action","web_guide_pc_download_dialog_download_pc_btn_click"),Z()},toMembership:function(){window.open("/cloud-storage-pricing-plans?subscribe=1&purchaseReason=guide_pc")},bottomTipClick:function(){this.$writeLog("action","web_bottom_tip_dialog_btn_click"),location.href="/cloud-storage-pricing-plans?purchaseReason=web_reason_download"},handleVipDialogClose:function(){this.showDialog=!1},closeDownloadTips:function(){this.bottomTipShow=!1,sessionStorage.removeItem("bottomTipShow")}}},Lt=Ft,Bt=(o("4264"),o("19ca"),Object(z["a"])(Lt,i,n,!1,null,"354395a2",null));e["default"]=Bt.exports},"7b99":function(t,e){t.exports="data:image/png;base64,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"},"8e87":function(t,e,o){},9564:function(t,e,o){"use strict";e["a"]={data:function(){return{loadingIns:null,loading:!1,loadingText:""}},watch:{loading:function(t){t||this.loadingIns&&this.loadingIns.close()}},beforeRouteLeave:function(t,e,o){this.loadingIns&&this.loadingIns.close(),o()}}},aa7e:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYBAMAAAASWSDLAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAkUExURUdwTJiYmJiYmJiYmJqamp2dnaSkpJiYmJiYmJiYmJmZmZeXl3o1SiYAAAALdFJOUwBL9s4zFwzrpYpz6YfcpQAAALJJREFUGNM9zSELwlAUBeAznLKZhtUkCIYVi5aVYVkVDAaLIOwHyEwW+8q6xb7kRNSdP+d9e/ftwR733O++XWALPUNg8HWhXOLAm60DvuVTKqU7SiwFfB2BE38m3LmWW6gCwg6ULMj/hQR0345tzZVbnbAHYE9eXI0x+ehDTbau9vi5MtIwZZHx2UPqO5qwADLOOoibFPDjJupgbnobQ9qyA6EdNhMV/IVu8M7yNHe7c/wBih87gSX4rT4AAAAASUVORK5CYII="},ac76:function(t,e,o){"use strict";o("f09e")},bad7:function(t,e,o){"use strict";o("1c76")},bc6b:function(t,e,o){"use strict";o("46a0")},c8ad:function(t,e,o){},c8b2:function(t,e,o){"use strict";o("f750")},f09e:function(t,e,o){},f750:function(t,e,o){}}]);